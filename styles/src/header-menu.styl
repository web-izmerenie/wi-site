/**
 * Menu in header styles
 *
 * @author Viacheslav Lotsmanov
 * @license GNU/AGPLv3
 * @see {@link https://github.com/web-izmerenie/wi-site/blob/master/LICENSE-AGPLv3|License}
 */

.call-menu
	display block
	text-decoration none
	absolute(28px, 0)
	size(($icons.show-menu.width), ($icons.show-menu.height))
	z-index 4
	opacity 0
	margin-top 0
	transition opacity $animation-speed $animation-curve,
		right $animation-speed $animation-curve,
		margin-top $animation-speed $animation-curve

	@media (max-width: ($responsive-2))
		transform scale(0.74)
		top (28px - (35px - 28px))

	&:before, &:after
		pseudo-block()
		absolute(0, auto, auto, 0)
		transition opacity $animation-speed $animation-curve,
			transform $animation-speed $animation-curve
		transform rotate(0deg)

	&:before
		icon($icons.show-menu)
		opacity 1

	&:after
		icon($icons.show-menu-active)
		opacity 0

	body.loaded &
		right 29px
		opacity 1

		@media (max-width: ($responsive-2))
			right (29px - (36px - 29px))

.menu
	$menu-text-color = #9daeb8
	$menu-active-text-color = #f5ce08
	$menu-active-bg-color = #122939
	$menu-text-fs-2 = 15px
	$menu-text-fs-3 = 18px
	$menu-margin = 23px

	display block
	background $header-bg-color
	size 100% 0
	z-index 3
	absolute(0, 0)
	overflow hidden
	transition width ($animation-speed*2) $animation-curve,
		height $animation-speed $animation-curve
	min-width $min-width

	@media (max-width: ($responsive-1))
		size 0 100%
		min-width 0
		max-width 220px

		&:before
			pseudo-block()
			background $header-bg-color
			size 100% 0
			fixed(0, 0)
			transition height $animation-speed $animation-curve

		.logo
			display none

	.logo .logo-text
		@media (min-width: ($responsive-2 + 1px)) and (max-width 1130px)
			display none

		@media (min-width: ($responsive-1 + 1px)) and (max-width 960px)
			display none

	nav
		size auto 100%
		absolute(0, 113px)
		white-space nowrap

		@media (max-width: ($responsive-2))
			right 99px

		& > a, & > span
			text-decoration none
			display inline-block
			size auto, 100%
			custom-font(
				'Proxima Nova Rg', normal,
				$menu-text-fs-3, ($menu-text-fs-3 + 2px))
			box-sizing border-box
			text-transform uppercase
			color $menu-text-color
			margin-left $menu-margin
			padding-top (61px - 16px)
			transition color $animation-speed $animation-curve,
				background-color $animation-speed $animation-curve,
				padding-left $animation-speed $animation-curve,
				padding-right $animation-speed $animation-curve
			background transparent

			@media (max-width: ($responsive-2))
				padding-top (54px - 13px)
				font-metrics($menu-text-fs-2, ($menu-text-fs-2 + 2px))

			&:first-child
				margin-left 0

		& > a.active, & > span
			background $menu-active-bg-color
			color $menu-active-text-color
			custom-font(
				'Proxima Nova Rg', bold,
				$menu-text-fs, ($menu-text-fs + 2px))
			padding-x $menu-margin

		& > a:hover, & > a.active:hover
			color white

		@media (max-width: ($responsive-1))
			size 220px auto
			absolute(50%, 0)
			transform translateY(-50%)
			padding-y 11px

			& > a, & > span
				display block
				size 100% 58px
				padding-top 21px
				padding-right 0
				margin-left 0
				padding-left 26px

			& > a.active, & > span
				padding-right 0

			&.scroll
				top 0
				transform translateY(0)

&.menu-active
	.call-menu
		&:before, &:after
			transform rotate(90deg)
		&:before
			opacity 0
		&:after
			opacity 1

	.menu
		height $header-height-3

		@media (max-width: ($responsive-2))
			height $header-height-2

		@media (max-width: ($responsive-1))
			size 100%

$smaller-screen-header-height = 70px

&.scroll-menu-active
	.call-menu
		$h = ($icons.show-menu.height)
		margin-top (-28px - $h)

		@media (min-width: ($responsive-1 + 1px))
			&:before, &:after
				opacity 0

		@media (max-width: ($responsive-1))
			margin-top (-28px + 14px)

	.menu
		@media (min-width: ($responsive-2 + 1px))
			height $header-height-3

		@media (max-width: ($responsive-2))
			height $header-height-2

		@media (max-width: ($responsive-1))
			size 0 100%

			&:before
				height $smaller-screen-header-height

	@media (max-width: ($responsive-1))
		.logo
			fixed(15px, auto, auto, 29px)
			z-index 5
			transition left $animation-speed $animation-curve,
				top $animation-speed $animation-curve

&.menu-active.scroll-menu-active .menu
	@media (max-width: ($responsive-1))
		size 100%

// for get height of header by scripts (offset for scrolling to anchor)
.height-helper
	display block
	size 0 $header-height-3
	fixed(0, 0)
	z-index -1

	@media (max-width: ($responsive-2))
		height $header-height-2

	@media (max-width: ($responsive-1))
		height $smaller-screen-header-height
